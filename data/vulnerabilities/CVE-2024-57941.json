{
	"name": "CVE-2024-57941",
	"description": "In the Linux kernel, the following vulnerability has been resolved:netfs: Fix the (non-)cancellation of copy when cache is temporarily disabledWhen the caching for a cookie is temporarily disabled (e.g. due to a DIOwrite on that file), future copying to the cache for that file is disableduntil all fds open on that file are closed.  However, if netfslib is usingthe deprecated PG_private_2 method (such as is currently used by ceph), anddecides it wants to copy to the cache, netfs_advance_write() will just bailat the first check seeing that the cache stream is unavailable, andindicate that it dealt with all the content.This means that we have no subrequests to provide notifications to drivethe state machine or even to pin the request and the request just getsdiscarded, leaving the folios with PG_private_2 set.Fix this by jumping directly to cancel the request if the cache is notavailable.  That way, we don't remove mark3 from the folio_queue list andnetfs_pgpriv2_cancel() will clean up the folios.This was found by running the generic/013 xfstest against ceph with anactive cache and the \"-o fsc\" option passed to ceph.  That would usuallyhang",
	"type": "none",
	"severity": "none",
	"state": "published",
	"references": [
		"https://git.kernel.org/stable/c/ba37bdfe59fb43e80dd79290340a21864ba4b61e",
		"https://git.kernel.org/stable/c/d0327c824338cdccad058723a31d038ecd553409"
	],
	"datetime": "2025-02-06 12:35:29",
	"connections": [],
	"devices": [],
	"distributions": [
		{
			"name": "debian",
			"version": "bookworm",
			"vendor": "debian-bookworm"
		},
		{
			"name": "debian",
			"version": "bullseye",
			"vendor": "debian-bullseye"
		},
		{
			"name": "debian",
			"version": "sid",
			"vendor": "debian-sid"
		},
		{
			"name": "debian",
			"version": "trixie",
			"vendor": "debian-trixie"
		}
	],
	"packages": [
		{
			"name": "linux",
			"version": "\u003c 6.1.123-1",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-bookworm"
		},
		{
			"name": "linux",
			"version": "\u003c 5.10.223-1",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-bullseye"
		},
		{
			"name": "linux",
			"version": "\u003c 6.12.10-1",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-sid"
		}
	],
	"products": [],
	"programs": [],
	"weaknesses": []
}