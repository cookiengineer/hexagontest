{
	"name": "CVE-2024-57913",
	"description": "In the Linux kernel, the following vulnerability has been resolved:usb: gadget: f_fs: Remove WARN_ON in functionfs_bindThis commit addresses an issue related to below kernel panic wherepanic_on_warn is enabled. It is caused by the unnecessary use of WARN_ONin functionsfs_bind, which easily leads to the following scenarios.1.adb_write in adbd               2. UDC write via configfs  =================                 =====================-\u003eusb_ffs_open_thread()           -\u003eUDC write -\u003eopen_functionfs()               -\u003econfigfs_write_iter()  -\u003eadb_open()                      -\u003egadget_dev_desc_UDC_store()   -\u003eadb_write()                     -\u003eusb_gadget_register_driver_owner                                      -\u003edriver_register()-\u003eStartMonitor()                       -\u003ebus_add_driver() -\u003eadb_read()                           -\u003egadget_bind_driver()\u003ctimes-out without BIND event\u003e           -\u003econfigfs_composite_bind()                                          -\u003eusb_add_function()-\u003eopen_functionfs()                        -\u003effs_func_bind() -\u003eadb_open()                               -\u003efunctionfs_bind()                                       \u003cffs-\u003estate !=FFS_ACTIVE\u003eThe adb_open, adb_read, and adb_write operations are invoked from thedaemon, but trying to bind the function is a process that is invoked byUDC write through configfs, which opens up the possibility of a racecondition between the two paths. In this race scenario, the kernel panicoccurs due to the WARN_ON from functionfs_bind when panic_on_warn isenabled. This commit fixes the kernel panic by removing the unnecessaryWARN_ON.Kernel panic - not syncing: kernel: panic_on_warn set ...[   14.542395] Call trace:[   14.542464]  ffs_func_bind+0x1c8/0x14a8[   14.542468]  usb_add_function+0xcc/0x1f0[   14.542473]  configfs_composite_bind+0x468/0x588[   14.542478]  gadget_bind_driver+0x108/0x27c[   14.542483]  really_probe+0x190/0x374[   14.542488]  __driver_probe_device+0xa0/0x12c[   14.542492]  driver_probe_device+0x3c/0x220[   14.542498]  __driver_attach+0x11c/0x1fc[   14.542502]  bus_for_each_dev+0x104/0x160[   14.542506]  driver_attach+0x24/0x34[   14.542510]  bus_add_driver+0x154/0x270[   14.542514]  driver_register+0x68/0x104[   14.542518]  usb_gadget_register_driver_owner+0x48/0xf4[   14.542523]  gadget_dev_desc_UDC_store+0xf8/0x144[   14.542526]  configfs_write_iter+0xf0/0x138",
	"type": "none",
	"severity": "none",
	"state": "published",
	"references": [
		"https://git.kernel.org/stable/c/19fc1c83454ca9d5699e39633ec79ce26355251c",
		"https://git.kernel.org/stable/c/82f60f3600aecd9ffcd0fbc4e193694511c85b47",
		"https://git.kernel.org/stable/c/a8b6a18b9b66cc4c016d63132b59ce5383f7cdd2",
		"https://git.kernel.org/stable/c/dfc51e48bca475bbee984e90f33fdc537ce09699",
		"https://git.kernel.org/stable/c/ea6a1498742430eb2effce0d1439ff29ef37dd7d"
	],
	"datetime": "2025-02-06 12:35:29",
	"connections": [],
	"devices": [],
	"distributions": [
		{
			"name": "debian",
			"version": "bookworm",
			"vendor": "debian-bookworm"
		},
		{
			"name": "debian",
			"version": "bullseye",
			"vendor": "debian-bullseye"
		},
		{
			"name": "debian",
			"version": "sid",
			"vendor": "debian-sid"
		},
		{
			"name": "debian",
			"version": "trixie",
			"vendor": "debian-trixie"
		}
	],
	"packages": [
		{
			"name": "linux",
			"version": "any",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-bookworm"
		},
		{
			"name": "linux",
			"version": "\u003c 6.12.10-1",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-sid"
		}
	],
	"products": [],
	"programs": [],
	"weaknesses": []
}