{
	"name": "CVE-2024-26756",
	"description": "In the Linux kernel, the following vulnerability has been resolved:md: Don't register sync_thread for reshape directlyCurrently, if reshape is interrupted, then reassemble the array willregister sync_thread directly from pers-\u003erun(), in this case'MD_RECOVERY_RUNNING' is set directly, however, there is no guaranteethat md_do_sync() will be executed, hence stop_sync_thread() will hangbecause 'MD_RECOVERY_RUNNING' can't be cleared.Last patch make sure that md_do_sync() will set MD_RECOVERY_DONE,however, following hang can still be triggered by dm-raid testshell/lvconvert-raid-reshape.sh occasionally:[root@fedora ~]# cat /proc/1982/stack[\u003c0\u003e] stop_sync_thread+0x1ab/0x270 [md_mod][\u003c0\u003e] md_frozen_sync_thread+0x5c/0xa0 [md_mod][\u003c0\u003e] raid_presuspend+0x1e/0x70 [dm_raid][\u003c0\u003e] dm_table_presuspend_targets+0x40/0xb0 [dm_mod][\u003c0\u003e] __dm_destroy+0x2a5/0x310 [dm_mod][\u003c0\u003e] dm_destroy+0x16/0x30 [dm_mod][\u003c0\u003e] dev_remove+0x165/0x290 [dm_mod][\u003c0\u003e] ctl_ioctl+0x4bb/0x7b0 [dm_mod][\u003c0\u003e] dm_ctl_ioctl+0x11/0x20 [dm_mod][\u003c0\u003e] vfs_ioctl+0x21/0x60[\u003c0\u003e] __x64_sys_ioctl+0xb9/0xe0[\u003c0\u003e] do_syscall_64+0xc6/0x230[\u003c0\u003e] entry_SYSCALL_64_after_hwframe+0x6c/0x74Meanwhile mddev-\u003erecovery is:MD_RECOVERY_RUNNING |MD_RECOVERY_INTR |MD_RECOVERY_RESHAPE |MD_RECOVERY_FROZENFix this problem by remove the code to register sync_thread directlyfrom raid10 and raid5. And let md_check_recovery() to registersync_thread.",
	"type": "none",
	"severity": "none",
	"state": "published",
	"references": [
		"https://git.kernel.org/stable/c/13b520fb62b772e408f9b79c5fe18ad414e90417",
		"https://git.kernel.org/stable/c/ad39c08186f8a0f221337985036ba86731d6aafe"
	],
	"datetime": "2025-02-06 12:35:04",
	"connections": [],
	"devices": [],
	"distributions": [
		{
			"name": "debian",
			"version": "bookworm",
			"vendor": "debian-bookworm"
		},
		{
			"name": "debian",
			"version": "bullseye",
			"vendor": "debian-bullseye"
		},
		{
			"name": "debian",
			"version": "sid",
			"vendor": "debian-sid"
		},
		{
			"name": "debian",
			"version": "trixie",
			"vendor": "debian-trixie"
		}
	],
	"packages": [
		{
			"name": "linux",
			"version": "any",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-bookworm"
		},
		{
			"name": "linux",
			"version": "\u003c 6.7.7-1",
			"architecture": "any",
			"manager": "apt",
			"vendor": "debian-sid"
		}
	],
	"products": [],
	"programs": [],
	"weaknesses": []
}